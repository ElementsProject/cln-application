(self.webpackChunkcln_application_frontend=self.webpackChunkcln_application_frontend||[]).push([[948],{5156:()=>{},8233:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var l=s(2176),o=s(4571),n=s(5708),a=s(819),i=s(4550),r=s(5351),d=s(7378),c=s(9786),C=s(815),N=s(623),m=s(7280),x=s(5235),h=s(1343),u=s(5675),g=s(4613),f=s(7557),w=s(9735),j=s(4806),p=s(5168),T=s(307),R=s(812);const I=()=>{const e=(0,l.useContext)(r.o),t=(0,l.useContext)(d.D),[s,o]=(0,l.useState)("");(0,l.useEffect)((()=>{var e,s;let l=t.nodeInfo.id||"";t.nodeInfo.address&&null!==(e=t.nodeInfo.address)&&void 0!==e&&e.length&&t.nodeInfo.address.length>0?l=l+"@"+t.nodeInfo.address[0].address+":"+t.nodeInfo.address[0].port:t.nodeInfo.binding&&null!==(s=t.nodeInfo.binding)&&void 0!==s&&s.length&&t.nodeInfo.binding.length>0?l=l+"@"+t.nodeInfo.binding[0].address+":"+t.nodeInfo.binding[0].port:l+="@ : ",o(l)}),[t]);const n=()=>{(0,T.eM)(s).then((t=>{e.setShowToast({show:!0,message:"Node ID Copied Successfully!",bg:"success"})})).catch((e=>{p.A.error(e)}))},a=()=>{e.setShowModals({...e.showModals,nodeInfoModal:!1})};return(0,R.jsxs)(h.A,{show:e.showModals.nodeInfoModal,onHide:a,centered:!0,className:"modal-lg","data-testid":"node-info-modal",children:[(0,R.jsx)(h.A.Header,{className:"d-flex align-items-start justify-content-end pb-0",children:(0,R.jsx)("span",{className:"span-close-svg",onClick:a,children:(0,R.jsx)(j.P,{})})}),(0,R.jsxs)(h.A.Body,{className:"py-0",children:[(0,R.jsxs)(u.A,{className:"qr-container m-auto d-flex",children:[(0,R.jsx)(N.N,{children:(0,R.jsx)(m.P.img,{alt:"Core Lightning Logo",src:e.appConfig.uiConfig.appMode===c.Jr.DARK?"/images/cln-logo-dark.png":"/images/cln-logo-light.png",className:"qr-cln-logo",initial:{opacity:0},animate:{opacity:1},transition:{delay:.05,duration:.01}},"cln-logo")}),(0,R.jsx)(x.Xe,{value:s||"",size:220,includeMargin:!0,bgColor:e.appConfig.uiConfig.appMode===c.Jr.DARK?"#0C0C0F":"#FFFFFF",fgColor:e.appConfig.uiConfig.appMode===c.Jr.DARK?"#FFFFFF":"#000000"})]}),(0,R.jsxs)(u.A,{className:"d-flex align-items-start justify-content-center pt-2",children:[(0,R.jsx)("h4",{className:"text-blue fw-bold d-flex justify-content-center",children:"Node ID"}),(0,R.jsx)("p",{className:"py-3 w-75 text-break text-dark d-flex justify-content-center",children:"Other Lightning nodes can open payment channels to your node following this Node ID."}),(0,R.jsx)("div",{className:"mb-4 text-break text-dark d-flex justify-content-center",children:(0,R.jsxs)(g.A,{className:"mb-3",children:[(0,R.jsx)(f.A.Control,{onClick:n,placeholder:s,"aria-label":s,"aria-describedby":"copy-addon",className:"form-control-left",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:s,className:"form-control-addon form-control-addon-right",onClick:n,children:(0,R.jsx)(w.G,{id:s})})]})})]})]})]})};var A=s(4173),E=s(1829),_=s(8286),v=s(2189),L=s(1416);const b=e=>(0,R.jsx)(v.A,{placement:"auto",delay:{show:250,hide:250},overlay:e.showTooltip?(0,R.jsx)(L.A,{children:e.tooltipText||""}):(0,R.jsx)(R.Fragment,{}),children:(0,R.jsxs)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsx)("path",{d:"M1 8.5H16",stroke:"#9F9F9F",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,R.jsx)("path",{d:"M8.5 1V16",stroke:"#9F9F9F",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}),O=()=>{var e,t,s,o,n,i,d,C,I,v,L,O,y,P,G,M,S,k,H,V,F,D,U,K;const J=(0,l.useContext)(r.o),{createInvoiceRune:B}=(0,a.A)(),[z,W]=(0,l.useState)(["LN Message","LN Message (Tor)"]),[Y,q]=(0,l.useState)("LN Message"),[X,$]=(0,l.useState)(""),[Q,Z]=(0,l.useState)({port:{title:"Websocket Port",field:"LIGHTNING_WS_PORT"},host:{title:"CLN Host",field:"DEVICE_DOMAIN_NAME"},rune:{title:"Rune",field:"COMMANDO_RUNE"},invoiceRune:{title:"Invoice Rune",field:"INVOICE_RUNE"},connectUrl:{title:"Lnmessage URL",field:""}}),[ee,te]=(0,l.useState)(!1);(0,l.useEffect)((()=>{let e=["LN Message","LN Message (Tor)"];J.walletConnect.LIGHTNING_REST_PORT&&""!==J.walletConnect.LIGHTNING_REST_PORT&&(e.push("REST"),J.walletConnect.TOR_SERVICE&&""!==J.walletConnect.TOR_SERVICE&&e.push("REST (Tor)")),J.walletConnect.LIGHTNING_GRPC_PORT&&""!==J.walletConnect.LIGHTNING_GRPC_PORT&&(e.push("gRPC"),J.walletConnect.TOR_SERVICE&&""!==J.walletConnect.TOR_SERVICE&&e.push("gRPC (Tor)")),W(e),"LN Message"===Y&&$("ln-message://"+J.walletConnect.DEVICE_DOMAIN_NAME+":"+J.walletConnect.LIGHTNING_WS_PORT+"?rune="+J.walletConnect.COMMANDO_RUNE+(""!==J.walletConnect.INVOICE_RUNE?"&invoiceRune="+J.walletConnect.INVOICE_RUNE:""))}),[J,Y]);const se=e=>{let t="";switch(e.target.id){case"Websocket Port":t=J.walletConnect.LIGHTNING_WS_PORT||"";break;case"gRPC Port":t=J.walletConnect.LIGHTNING_GRPC_PORT||"";break;case"REST Port":t=J.walletConnect.LIGHTNING_REST_PORT||"";break;case"CLN Host":t=(Y.includes("(Tor)")?J.walletConnect.TOR_SERVICE:J.walletConnect.DEVICE_DOMAIN_NAME)||"";break;case"Rune":t=J.walletConnect.COMMANDO_RUNE||"";break;case"Invoice Rune":t=J.walletConnect.INVOICE_RUNE||"";break;case"Client Key":t=J.walletConnect.CLIENT_KEY||"";break;case"Client Cert":t=J.walletConnect.CLIENT_CERT||"";break;case"CA Cert":t=J.walletConnect.CA_CERT||"";break;default:t=X||""}(0,T.eM)(t).then((t=>{J.setShowToast({show:!0,message:e.target.id+" Copied Successfully!",bg:"success"})})).catch((e=>{p.A.error(e)}))},le=()=>{te(!0),B().then((()=>{J.setShowToast({show:!0,message:"Created Invoice Rune Successfully!",bg:"success"})})).catch((e=>{p.A.error(e.message||JSON.stringify(e)),J.setShowToast({show:!0,message:`Error Creating Invoice Rune: ${e.message||""}`,bg:"danger"})})).finally((()=>{te(!1)}))},oe=()=>{J.setShowModals({...J.showModals,connectWalletModal:!1})},ne=e=>{var t,s,l,o;switch(q(e.target.id),e.target.id){case"LN Message":default:Z({port:{title:"Websocket Port",field:"LIGHTNING_WS_PORT"},host:{title:"CLN Host",field:"DEVICE_DOMAIN_NAME"},rune:{title:"Rune",field:"COMMANDO_RUNE"},invoiceRune:{title:"Invoice Rune",field:"INVOICE_RUNE"},connectUrl:{title:"Lnmessage URL",field:""}}),$("ln-message://"+J.walletConnect.DEVICE_DOMAIN_NAME+":"+J.walletConnect.LIGHTNING_WS_PORT+"?rune="+J.walletConnect.COMMANDO_RUNE+(""!==J.walletConnect.INVOICE_RUNE?"&invoiceRune="+J.walletConnect.INVOICE_RUNE:""));break;case"LN Message (Tor)":Z({port:{title:"Websocket Port",field:"LIGHTNING_WS_PORT"},host:{title:"CLN Host",field:"TOR_SERVICE"},rune:{title:"Rune",field:"COMMANDO_RUNE"},invoiceRune:{title:"Invoice Rune",field:"INVOICE_RUNE"},connectUrl:{title:"Lnmessage URL",field:""}}),$("ln-message://"+J.walletConnect.TOR_SERVICE+":"+J.walletConnect.LIGHTNING_WS_PORT+"?rune="+J.walletConnect.COMMANDO_RUNE+(""!==J.walletConnect.INVOICE_RUNE?"&invoiceRune="+J.walletConnect.INVOICE_RUNE:""));break;case"REST":Z({protocol:{title:"REST Protocol",field:"LIGHTNING_REST_PROTOCOL"},host:{title:"CLN Host",field:"DEVICE_DOMAIN_NAME"},port:{title:"REST Port",field:"LIGHTNING_REST_PORT"},clientKey:{title:"Client Key",field:"CLIENT_KEY"},clientCert:{title:"Client Cert",field:"CLIENT_CERT"},caCert:{title:"CA Cert",field:"CA_CERT"},connectUrl:{title:"REST URL",field:""}}),$("clnrest://"+J.walletConnect.LIGHTNING_REST_PROTOCOL+"://"+J.walletConnect.DEVICE_DOMAIN_NAME+":"+J.walletConnect.LIGHTNING_REST_PORT+("https"===(null===(t=J.walletConnect.LIGHTNING_REST_PROTOCOL)||void 0===t?void 0:t.toLowerCase())?"?clientKey="+J.walletConnect.CLIENT_KEY+"&clientCert="+J.walletConnect.CLIENT_CERT+"&caCert="+J.walletConnect.CA_CERT:""));break;case"REST (Tor)":Z({protocol:{title:"REST Protocol",field:"LIGHTNING_REST_PROTOCOL"},host:{title:"CLN Host",field:"TOR_SERVICE"},port:{title:"REST Port",field:"LIGHTNING_REST_PORT"},clientKey:{title:"Client Key",field:"CLIENT_KEY"},clientCert:{title:"Client Cert",field:"CLIENT_CERT"},caCert:{title:"CA Cert",field:"CA_CERT"},connectUrl:{title:"REST URL",field:""}}),$("clnrest://"+J.walletConnect.LIGHTNING_REST_PROTOCOL+"://"+J.walletConnect.TOR_SERVICE+":"+J.walletConnect.LIGHTNING_REST_PORT+("https"===(null===(s=J.walletConnect.LIGHTNING_REST_PROTOCOL)||void 0===s?void 0:s.toLowerCase())?"?clientKey="+J.walletConnect.CLIENT_KEY+"&clientCert="+J.walletConnect.CLIENT_CERT+"&caCert="+J.walletConnect.CA_CERT:""));break;case"gRPC":Z({protocol:{title:"gRPC Protocol",field:"LIGHTNING_GRPC_PROTOCOL"},host:{title:"CLN Host",field:"DEVICE_DOMAIN_NAME"},port:{title:"GRPC Port",field:"LIGHTNING_GRPC_PORT"},clientKey:{title:"Client Key",field:"CLIENT_KEY"},clientCert:{title:"Client Cert",field:"CLIENT_CERT"},caCert:{title:"CA Cert",field:"CA_CERT"},connectUrl:{title:"gRPC URL",field:""}}),$("cln-grpc://"+J.walletConnect.LIGHTNING_GRPC_PROTOCOL+"://"+J.walletConnect.DEVICE_DOMAIN_NAME+":"+J.walletConnect.LIGHTNING_GRPC_PORT+("https"===(null===(l=J.walletConnect.LIGHTNING_GRPC_PROTOCOL)||void 0===l?void 0:l.toLowerCase())?"?clientKey="+J.walletConnect.CLIENT_KEY+"&clientCert="+J.walletConnect.CLIENT_CERT+"&caCert="+J.walletConnect.CA_CERT:""));break;case"gRPC (Tor)":Z({protocol:{title:"gRPC Protocol",field:"LIGHTNING_GRPC_PROTOCOL"},host:{title:"CLN Host",field:"TOR_SERVICE"},port:{title:"GRPC Port",field:"LIGHTNING_GRPC_PORT"},clientKey:{title:"Client Key",field:"CLIENT_KEY"},clientCert:{title:"Client Cert",field:"CLIENT_CERT"},caCert:{title:"CA Cert",field:"CA_CERT"},connectUrl:{title:"gRPC URL",field:""}}),$("cln-grpc://"+J.walletConnect.LIGHTNING_GRPC_PROTOCOL+"://"+J.walletConnect.TOR_SERVICE+":"+J.walletConnect.LIGHTNING_GRPC_PORT+("https"===(null===(o=J.walletConnect.LIGHTNING_GRPC_PROTOCOL)||void 0===o?void 0:o.toLowerCase())?"?clientKey="+J.walletConnect.CLIENT_KEY+"&clientCert="+J.walletConnect.CLIENT_CERT+"&caCert="+J.walletConnect.CA_CERT:""))}};let ae,ie;return"LN Message"!==Y&&"LN Message (Tor)"!==Y||(J.walletConnect.INVOICE_RUNE&&""!==J.walletConnect.INVOICE_RUNE?(ae=se,ie=w.G):(ae=le,ie=b)),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(h.A,{show:J.showModals.connectWalletModal,onHide:oe,centered:!0,className:"modal-lg","data-testid":"connect-wallet",children:[(0,R.jsx)(h.A.Header,{className:"d-flex align-items-start justify-content-end pb-0",children:(0,R.jsx)("span",{className:"span-close-svg",onClick:oe,children:(0,R.jsx)(j.P,{})})}),(0,R.jsxs)(h.A.Body,{className:"py-0 px-4",children:[(0,R.jsxs)(u.A,{className:"qr-container m-auto d-flex",children:[(0,R.jsx)(N.N,{children:(0,R.jsx)(m.P.img,{alt:"Core Lightning Logo",src:J.appConfig.uiConfig.appMode===c.Jr.DARK?"/images/cln-logo-dark.png":"/images/cln-logo-light.png",className:"qr-cln-logo",initial:{opacity:0},animate:{opacity:1},transition:{delay:.05,duration:.01}},"cln-logo")}),(0,R.jsx)(x.Xe,{value:X,size:220,includeMargin:!0,bgColor:J.appConfig.uiConfig.appMode===c.Jr.DARK?"#0C0C0F":"#FFFFFF",fgColor:J.appConfig.uiConfig.appMode===c.Jr.DARK?"#FFFFFF":"#000000"})]}),(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center pt-2",children:(0,R.jsx)("h4",{className:"w-100 text-blue fw-semibold d-flex justify-content-center text-center",children:"Connect wallet to your node"})}),(0,R.jsxs)(u.A,{className:"d-flex align-items-start justify-content-center",children:[(0,R.jsxs)(A.A,{xs:Y.includes("LN Message")?12:6,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:"Network"}),(0,R.jsxs)(E.A,{className:"dropdown-network mt-1 mb-2",children:[(0,R.jsx)(E.A.Toggle,{variant:"secondary",id:"network",className:"w-100 d-flex align-items-center justify-content-between","data-testid":"network-toggle",children:Y}),(0,R.jsx)(E.A.Menu,{"data-testid":"network-menu",children:z.map((e=>(0,R.jsx)(E.A.Item,{"data-testid":"network-item",as:"div",id:e,onClick:ne,children:e},e)))})]})]}),!Y.includes("LN Message")&&Q.protocol?(0,R.jsxs)(A.A,{xs:6,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:Q.protocol.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:Q.protocol.title,value:J.walletConnect[Q.protocol.field],"aria-label":J.walletConnect[Q.protocol.field],"aria-describedby":"copy-addon-port",className:"form-control-left","data-testid":"port",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:Q.port.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:Q.port.title})})]})]}):(0,R.jsx)(A.A,{xs:6})]}),(0,R.jsxs)(u.A,{className:"d-flex align-items-start justify-content-center",children:[(0,R.jsxs)(A.A,{xs:6,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:Q.host.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:Q.host.title,value:J.walletConnect[Q.host.field],"aria-label":J.walletConnect[Q.host.field],"aria-describedby":"copy-addon-host",className:"form-control-left","data-testid":"host",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:Q.host.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:Q.host.title})})]})]}),(0,R.jsxs)(A.A,{xs:6,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:Q.port.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:Q.port.title,value:J.walletConnect[Q.port.field],"aria-label":J.walletConnect[Q.port.field],"aria-describedby":"copy-addon-port",className:"form-control-left","data-testid":"port",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:Q.port.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:Q.port.title})})]})]})]}),"gRPC"!==Y&&"gRPC (Tor)"!==Y&&Q.rune?(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:Q.rune.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:Q.rune.title,value:J.walletConnect[Q.rune.field],"aria-label":J.walletConnect[Q.rune.field],"aria-describedby":"copy-addon-rune",className:"form-control-left","data-testid":"rune",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:Q.rune.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:Q.rune.title})})]})]})}):(0,R.jsx)(R.Fragment,{}),("LN Message"===Y||"LN Message (Tor)"===Y)&&(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:null===(e=Q.invoiceRune)||void 0===e?void 0:e.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:ae,id:null===(t=Q.invoiceRune)||void 0===t?void 0:t.title,value:J.walletConnect.INVOICE_RUNE,placeholder:"Not Found","aria-label":J.walletConnect.INVOICE_RUNE,disabled:ee,"aria-describedby":"copy-addon-rune",className:"form-control-left","data-testid":"invoice-rune",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:null===(s=Q.invoiceRune)||void 0===s?void 0:s.title,className:"form-control-addon form-control-addon-right",onClick:ee?void 0:ae,"data-testid":"invoice-rune-button",children:ee?(0,R.jsx)("span",{className:"h-100 d-flex justify-content-center align-items-center",children:(0,R.jsx)(_.A,{className:"me-1",variant:"light",size:"sm","data-testid":"invoice-rune-spinner"})}):ie&&(0,R.jsx)(ie,{id:null===(o=Q.invoiceRune)||void 0===o?void 0:o.title,showTooltip:""===J.walletConnect.INVOICE_RUNE,tooltipText:"Create New Invoice Rune"})})]})]})}),Y.includes("REST")&&"https"===(null===(n=J.walletConnect.LIGHTNING_REST_PROTOCOL)||void 0===n?void 0:n.toLowerCase())||Y.includes("gRPC")&&"https"===(null===(i=J.walletConnect.LIGHTNING_GRPC_PROTOCOL)||void 0===i?void 0:i.toLowerCase())?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:null===(d=Q.clientKey)||void 0===d?void 0:d.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:null===(C=Q.clientKey)||void 0===C?void 0:C.title,value:J.walletConnect.CLIENT_KEY,"aria-label":J.walletConnect.CLIENT_KEY,"aria-describedby":"copy-addon-host",className:"form-control-left","data-testid":"client-key",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:null===(I=Q.clientKey)||void 0===I?void 0:I.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:null===(v=Q.clientKey)||void 0===v?void 0:v.title})})]})]})}),(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:null===(L=Q.clientCert)||void 0===L?void 0:L.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:null===(O=Q.clientCert)||void 0===O?void 0:O.title,value:J.walletConnect.CLIENT_CERT,"aria-label":J.walletConnect.CLIENT_CERT,"aria-describedby":"copy-addon-host",className:"form-control-left","data-testid":"client-cert",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:null===(y=Q.clientCert)||void 0===y?void 0:y.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:null===(P=Q.clientCert)||void 0===P?void 0:P.title})})]})]})})]}):(0,R.jsx)(R.Fragment,{}),"REST"===Y&&"https"===(null===(G=J.walletConnect.LIGHTNING_REST_PROTOCOL)||void 0===G?void 0:G.toLowerCase())||"gRPC"===Y&&"https"===(null===(M=J.walletConnect.LIGHTNING_GRPC_PROTOCOL)||void 0===M?void 0:M.toLowerCase())?(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:null===(S=Q.caCert)||void 0===S?void 0:S.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:null===(k=Q.caCert)||void 0===k?void 0:k.title,value:J.walletConnect.CA_CERT,"aria-label":J.walletConnect.CA_CERT,"aria-describedby":"copy-addon-host",className:"form-control-left","data-testid":"ca-cert",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:null===(H=Q.caCert)||void 0===H?void 0:H.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:null===(V=Q.caCert)||void 0===V?void 0:V.title})})]})]})}):(0,R.jsx)(R.Fragment,{}),(0,R.jsx)(u.A,{className:"mb-4 d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:"text-light",children:null===(F=Q.connectUrl)||void 0===F?void 0:F.title}),(0,R.jsxs)(g.A,{className:"mb-2",children:[(0,R.jsx)(f.A.Control,{onClick:se,id:null===(D=Q.connectUrl)||void 0===D?void 0:D.title,value:X||"","aria-label":X||"","aria-describedby":"copy-addon-rune",className:"form-control-left","data-testid":"connect-url",readOnly:!0}),(0,R.jsx)(g.A.Text,{id:null===(U=Q.connectUrl)||void 0===U?void 0:U.title,className:"form-control-addon form-control-addon-right",onClick:se,children:(0,R.jsx)(w.G,{id:null===(K=Q.connectUrl)||void 0===K?void 0:K.title})})]})]})})]})]})})};var y=s(5373),P=s.n(y),G=s(6205),M=s(9082),S=s(791);const k=e=>(0,R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 0 512 512",fill:"none",className:e.className,children:(0,R.jsx)("path",{className:"fill-body-color",d:"M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V448h40c13.3 0 24-10.7 24-24V384h40c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"})});var H=s(7159);const V=e=>(0,R.jsx)("svg",{className:e.className,height:"16",viewBox:"0 0 576 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,R.jsx)("path",{className:"fill-body-color",d:"M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"})}),F=e=>(0,R.jsx)("svg",{className:e.className,height:"16",viewBox:"0 0 640 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,R.jsx)("path",{className:"fill-body-color",d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm9.4 130.3C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5l-41.9-33zM192 256c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5z"})}),D=()=>{const e=(0,l.useContext)(r.o),{userLogin:t,initiateDataLoading:s}=(0,a.A)(),[o,n]=(0,l.useState)(!0),[i,d]=(0,l.useState)(c.JT.NONE),[C,N]=(0,l.useState)(""),{value:m,isValid:x,hasError:w,valueChangeHandler:j,inputBlurHandler:T,reset:I}=(0,G.A)((e=>""!==e.trim()));let E=!1;x&&(E=!0);return(0,R.jsx)("form",{className:"h-100",children:(0,R.jsxs)(h.A,{show:e.showModals.loginModal,centered:!0,className:"modal-lg","data-testid":"login-modal",children:[(0,R.jsx)(h.A.Header,{className:"d-flex align-items-start justify-content-start pb-0"}),(0,R.jsxs)(h.A.Body,{className:"py-0",children:[(0,R.jsx)(u.A,{className:"d-flex align-items-start justify-content-center",children:(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:" text-dark",children:"Password*"}),(0,R.jsxs)(g.A,{className:w?"invalid ":"",children:[(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-left",children:(0,R.jsx)(k,{})}),(0,R.jsx)(f.A.Control,{tabIndex:1,autoFocus:!0,id:"password",type:o?"password":"text",placeholder:"Password","aria-label":"password","aria-describedby":"addon-password",className:o&&""!==m?"form-control-middle password-input-ctrl":"form-control-middle",value:m,onChange:j,onBlur:T}),(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-right",children:(0,R.jsx)("span",{onClick:()=>{n(!o)},children:o?(0,R.jsx)(V,{}):(0,R.jsx)(F,{})})})]}),w?(0,R.jsx)(S.A,{message:"Invalid Password"}):(0,R.jsx)("div",{className:"message"})]})}),(0,R.jsx)(H.A,{responseStatus:i,responseMessage:C})]}),(0,R.jsx)(h.A.Footer,{children:(0,R.jsxs)("button",{tabIndex:2,type:"button",className:"btn-rounded bg-primary",onClick:l=>{T(null),E&&(d(c.JT.PENDING),N("Logging In..."),t(P()(m).toString()).then((t=>{p.A.info(t),t?(n(!0),d(c.JT.NONE),N(""),I(),s(),e.setShowModals({...e.showModals,loginModal:!1})):(d(c.JT.ERROR),N(t.response.data||t.message||"Unknown Error"))})).catch((e=>{var t,s;p.A.error((null===(t=e.response)||void 0===t?void 0:t.data)||e.message||JSON.stringify(e)),d(c.JT.ERROR),N(e.response&&e.response.data&&e.response.data.error?e.response.data.error:(null===(s=e.response)||void 0===s?void 0:s.data)||e.message||JSON.stringify(e))})))},disabled:i===c.JT.PENDING,children:["Login",i===c.JT.PENDING?(0,R.jsx)(_.A,{className:"mt-1 ms-2 text-white-dark",size:"sm"}):(0,R.jsx)(M.P,{className:"ms-3"})]})})]})})};var U=s(5451);const K=()=>{const e=(0,l.useContext)(r.o),{userLogout:t}=(0,a.A)(),s=e=>{!0===e&&t(),o()},o=()=>{e.setShowModals({...e.showModals,logoutModal:!1})};return(0,R.jsx)("form",{className:"h-100",children:(0,R.jsx)(h.A,{show:e.showModals.logoutModal,onHide:o,centered:!0,className:"modal-lg","data-testid":"logout-modal",children:(0,R.jsx)(h.A.Body,{className:"p-0 w-100 d-flex align-items-start justify-content-start",children:(0,R.jsxs)(A.A,{className:"d-flex align-items-stretch justify-content-between modal-box",children:[(0,R.jsx)(A.A,{xs:2,className:"message-type-box d-flex align-items-center justify-content-center",children:(0,R.jsx)(U.i,{})}),(0,R.jsx)(A.A,{xs:10,className:"p-3",children:(0,R.jsxs)(A.A,{className:"d-flex align-items-center justify-content-between",children:[(0,R.jsx)(A.A,{xs:7,className:"ps-1",children:"Logout?"}),(0,R.jsx)("button",{type:"button",className:"btn btn-rounded btn-sm btn-secondary",onClick:()=>s(!0),children:"Yes"}),(0,R.jsx)("button",{type:"button",className:"btn btn-rounded btn-sm btn-secondary",onClick:()=>s(!1),children:"No"})]})})]})})})})},J=()=>{const e=(0,l.useContext)(r.o),{resetUserPassword:t,initiateDataLoading:s}=(0,a.A)(),[o,n]=(0,l.useState)(!0),[i,d]=(0,l.useState)(!0),[C,N]=(0,l.useState)(!0),[m,x]=(0,l.useState)(c.JT.NONE),[w,T]=(0,l.useState)(""),{value:I,isValid:E,hasError:v,valueChangeHandler:L,inputBlurHandler:b,reset:O}=(0,G.A)((e=>""!==e.trim())),{value:y,isValid:D,hasError:U,valueChangeHandler:K,inputBlurHandler:J,reset:B}=(0,G.A)((e=>""!==e.trim())),{value:z,isValid:W,hasError:Y,valueChangeHandler:q,inputBlurHandler:X,reset:$}=(0,G.A)((e=>""!==e.trim()&&e===y));let Q=!1;(e.authStatus.isValidPassword&&E&&D&&W||!e.authStatus.isValidPassword&&D&&W)&&(Q=!0);const Z=()=>{e.setShowModals({...e.showModals,setPasswordModal:!1})};return(0,R.jsx)("form",{className:"h-100",children:(0,R.jsxs)(h.A,{show:e.showModals.setPasswordModal,onHide:e.authStatus.isValidPassword?Z:()=>{},centered:!0,className:"modal-lg","data-testid":"set-password-modal",children:[(0,R.jsx)(h.A.Header,{className:"d-flex align-items-start justify-content-end pb-0",children:e.authStatus.isValidPassword?(0,R.jsx)("span",{className:"span-close-svg",onClick:Z,children:(0,R.jsx)(j.P,{})}):(0,R.jsx)(R.Fragment,{})}),(0,R.jsxs)(h.A.Body,{className:"py-0",children:[(0,R.jsxs)(u.A,{className:"d-flex align-items-start justify-content-center",children:[e.authStatus.isValidPassword?(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:" text-dark",children:"Current Password*"}),(0,R.jsxs)(g.A,{className:v?"invalid ":"",children:[(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-left",children:(0,R.jsx)(k,{})}),(0,R.jsx)(f.A.Control,{tabIndex:1,autoFocus:!0,id:"currpassword",type:o?"password":"text",placeholder:"Current Password","aria-label":"curr-password","aria-describedby":"addon-curr-password",className:o&&""!==I?"form-control-middle password-input-ctrl":"form-control-middle",value:I,onChange:L,onBlur:b}),(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-right",children:(0,R.jsx)("span",{onClick:()=>{n(!o)},children:o?(0,R.jsx)(V,{}):(0,R.jsx)(F,{})})})]}),v?(0,R.jsx)(S.A,{message:"Invalid Current Password"}):(0,R.jsx)("div",{className:"message"})]}):(0,R.jsx)(R.Fragment,{}),(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:" text-dark",children:"New Password*"}),(0,R.jsxs)(g.A,{className:U?"invalid ":"",children:[(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-left",children:(0,R.jsx)(k,{})}),(0,R.jsx)(f.A.Control,{tabIndex:1,autoFocus:!e.authStatus.isValidPassword,id:"newpassword",type:i?"password":"text",placeholder:"New Password","aria-label":"new-password","aria-describedby":"addon-new-password",className:i&&""!==y?"form-control-middle password-input-ctrl":"form-control-middle",value:y,onChange:K,onBlur:J}),(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-right",children:(0,R.jsx)("span",{onClick:()=>{d(!i)},children:i?(0,R.jsx)(V,{}):(0,R.jsx)(F,{})})})]}),U?(0,R.jsx)(S.A,{message:"Invalid New Password"}):(0,R.jsx)("div",{className:"message"})]}),(0,R.jsxs)(A.A,{xs:12,children:[(0,R.jsx)(f.A.Label,{className:" text-dark",children:"Confirm New Password*"}),(0,R.jsxs)(g.A,{className:Y?"invalid ":"",children:[(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-left",children:(0,R.jsx)(k,{})}),(0,R.jsx)(f.A.Control,{tabIndex:2,id:"confirmnewpassword",type:C?"password":"text",placeholder:"Confirm New Password","aria-label":"confirm-new-password","aria-describedby":"addon-confirm-new-password",className:C&&""!==z?"form-control-middle password-input-ctrl":"form-control-middle",value:z,onChange:q,onBlur:X}),(0,R.jsx)(g.A.Text,{className:"form-control-addon form-control-addon-right",children:(0,R.jsx)("span",{onClick:()=>{N(!C)},children:C?(0,R.jsx)(V,{}):(0,R.jsx)(F,{})})})]}),Y?(0,R.jsx)(S.A,{message:z!==y?"New and Confirm New Password Do Not Match":"Invalid Confirm New Password"}):(0,R.jsx)("div",{className:"message"})]})]}),(0,R.jsx)(H.A,{responseStatus:m,responseMessage:w})]}),(0,R.jsx)(h.A.Footer,{children:(0,R.jsxs)("button",{tabIndex:3,type:"button",className:"btn-rounded bg-primary",onClick:l=>{b(null),J(null),X(null),Q&&(x(c.JT.PENDING),T("Resetting Password..."),t(e.authStatus.isValidPassword,e.authStatus.isValidPassword?P()(I).toString():"",P()(y).toString()).then((t=>{p.A.info(t),t?(n(!0),d(!0),N(!0),x(c.JT.NONE),T(""),O(),B(),$(),s(),e.setShowModals({...e.showModals,setPasswordModal:!1})):(x(c.JT.ERROR),T(t.response.data||t.message||"Unknown Error"))})).catch((e=>{var t,s;p.A.error((null===(t=e.response)||void 0===t?void 0:t.data)||e.message||JSON.stringify(e)),x(c.JT.ERROR),T(e.response&&e.response.data&&e.response.data.error?e.response.data.error:(null===(s=e.response)||void 0===s?void 0:s.data)||e.message||JSON.stringify(e))})))},disabled:m===c.JT.PENDING,children:[e.authStatus.isValidPassword?"Reset Password":"Set Password",m===c.JT.PENDING?(0,R.jsx)(_.A,{className:"mt-1 ms-2 text-white-dark",size:"sm"}):(0,R.jsx)(M.P,{className:"ms-3"})]})})]})})};var B=s(5321);const z=function(){var e;const t=(0,l.useContext)(r.o),s=(0,l.useContext)(d.D),N=(0,i.A)(),{setCSRFToken:m,getAppConfigurations:x,getAuthStatus:h,initiateDataLoading:u}=(0,a.A)(),g=document.getElementsByTagName("body")[0],f=g.attributes,w=document.createAttribute("data-bs-theme");w.value=(null===(e=t.appConfig.uiConfig.appMode)||void 0===e?void 0:e.toLowerCase())||"dark",g.style.backgroundColor=t.appConfig.uiConfig.appMode===c.Jr.LIGHT?"#EBEFF9":"#0C0C0F";const j=document.createAttribute("data-screensize");return j.value=N,f.setNamedItem(w),f.setNamedItem(j),(0,l.useEffect)((()=>{Promise.all([m(),x()]).then((e=>{let[l,o]=e;l?h().then((e=>{e.isAuthenticated?e.isValidPassword?u():(p.A.error(e),s.setNodeInfo({isLoading:!1,error:JSON.stringify(e)})):e.isValidPassword?t.setShowModals({...t.showModals,loginModal:!0}):t.setShowModals({...t.showModals,setPasswordModal:!0})})):(p.A.error(l),s.setNodeInfo({isLoading:!1,error:"object"===typeof l?JSON.stringify(l):l}))})).catch((e=>{p.A.error(e),e.response&&e.response.data?s.setNodeInfo({isLoading:!1,error:e.response.data}):!e.response&&e.message?s.setNodeInfo({isLoading:!1,error:e.message}):s.setNodeInfo({isLoading:!1,error:JSON.stringify(e)})}))}),[]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(n.A,{className:t.authStatus.isAuthenticated?"py-4":"py-4 blurred-container",id:"root-container","data-testid":"container",children:t.authStatus.isAuthenticated?(0,R.jsx)(o.sv,{}):(0,R.jsx)(B.h,{})}),(0,R.jsx)(C.A,{}),(0,R.jsx)(I,{}),(0,R.jsx)(O,{}),(0,R.jsx)(D,{}),(0,R.jsx)(K,{}),(0,R.jsx)(J,{})]})}}}]);
//# sourceMappingURL=948.256093c8.chunk.js.map