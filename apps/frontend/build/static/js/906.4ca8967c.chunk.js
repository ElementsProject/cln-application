"use strict";(self.webpackChunkcln_application_frontend=self.webpackChunkcln_application_frontend||[]).push([[906],{1906:(e,s,t)=>{t.r(s),t.d(s,{CLNOffersList:()=>S,default:()=>E});var l=t(2176),n=t(7280),i=t(623),a=t(5675),r=t(4173),o=t(8286),c=t(2458),d=t(947),f=t.n(d),x=t(2505),u=t(9735),h=t(9786),p=t(307),m=t(5168),j=t(3880),v=t(5588),g=t(812);const N=e=>{let{offer:s,copyHandler:t}=e;return(0,g.jsx)(g.Fragment,{children:s.bolt12?(0,g.jsxs)(a.A,{className:"cln-offer-detail","data-testid":"cln-offer-detail",children:[(0,g.jsx)(r.A,{xs:12,className:"fs-7 text-light",children:"Bolt 12"}),(0,g.jsx)(r.A,{xs:11,className:"pe-1 fs-7 overflow-x-ellipsis",children:s.bolt12}),(0,g.jsx)(r.A,{xs:1,onClick:t,className:"cln-offer-copy",id:"Bolt12",children:(0,g.jsx)(u.G,{id:"Bolt12",showTooltip:!0})})]}):(0,g.jsx)(g.Fragment,{})})},A=e=>{const s=(0,v.wA)();return(0,g.jsx)(n.P.div,{variants:{collapsed:{scale:.8,opacity:0},open:{scale:1,opacity:1}},transition:{duration:h.xt},className:"cln-offer-placeholder pb-2","data-testid":"cln-offer-placeholder",children:(0,g.jsx)(N,{offer:e.offer,copyHandler:t=>{let l="";t.target.id,l=e.offer.bolt12,(0,p.eM)(l).then((()=>{s((0,j.Fs)({show:!0,message:t.target.id+" Copied Successfully!",bg:"success"}))})).catch((e=>{m.A.error(e)}))}})})};var b=t(4520),w=t(8514),y=t(6002),k=t(5756);const C=e=>{let{offer:s}=e;return(0,g.jsxs)(a.A,{className:"offer-list-item d-flex justify-content-between align-items-center",children:[(0,g.jsx)(r.A,{xs:2,children:(0,g.jsx)(x.O,{className:"me-1",txStatus:s.used?"used":"unused"})}),(0,g.jsxs)(r.A,{xs:10,children:[(0,g.jsx)(a.A,{className:"d-flex justify-content-between align-items-center",children:(0,g.jsx)(r.A,{xs:12,className:"ps-2 d-flex align-items-center",children:(0,g.jsx)("span",{className:"text-dark fw-bold overflow-x-ellipsis",children:s.label||s.offer_id})})}),(0,g.jsxs)(a.A,{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsx)(r.A,{xs:8,className:"ps-2 pe-0 fs-7 text-light d-flex flex-row align-items-center",children:(0,g.jsx)("span",{className:"text-dark fw-bold overflow-x-ellipsis",children:s.active?"Active":"Inactive"})}),(0,g.jsx)(r.A,{xs:4,className:"ps-0 fs-7 text-light d-flex align-items-center justify-content-end",children:(0,g.jsx)("span",{className:"text-dark fw-bold overflow-x-ellipsis",children:s.single_use?"Single Use":"Multi Use"})})]})]})]})},F=e=>{let{i:s,expanded:t,setExpanded:l,initExpansions:a,offer:r}=e;const o=(0,v.d4)(k.SZ);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.P.div,{"data-testid":"cln-offer-header",className:"cln-offer-header "+(t[s]?"expanded":""),initial:!1,animate:{backgroundColor:o?t[s]?"#0C0C0F":"#2A2A2C":t[s]?"#EBEFF9":"#FFFFFF"},transition:{duration:h.xt},onClick:()=>(a[s]=!t[s],l(a)),children:(0,g.jsx)(C,{offer:r})}),(0,g.jsx)(i.N,{initial:!1,children:t[s]&&(0,g.jsx)(n.P.div,{"data-testid":"cln-offer-details",className:"cln-offer-details",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:h.xt,ease:[.4,.52,.83,.98]},children:(0,g.jsx)(A,{offer:r})},"content")})]})},S=()=>{var e;const s=(0,v.d4)(k.SZ),t=(0,v.d4)(k.Kc),n=(0,v.d4)(y.S9),i=(null===(e=n.offers)||void 0===e?void 0:e.reduce((e=>[...e,!1]),[]))||[],[d,x]=(0,l.useState)(i),[u,p]=(0,l.useState)([]),[m,j]=(0,l.useState)(0),[N,A]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),E=(0,l.useRef)(null),T=(0,l.useCallback)((e=>{e&&(E.current=e)}),[]);(0,l.useEffect)((()=>{if(n&&n.offers&&n.offers.length>0){var e;const s=n.offers.slice(0,h.Tr);p(s),j(h.Tr),h.Tr>=(null===n||void 0===n||null===(e=n.offers)||void 0===e?void 0:e.length)&&S(!0)}}),[n]);const _=(0,l.useCallback)((()=>{N||C||(A(!0),setTimeout((()=>{var e,s;const t=m+h.Tr,l=(null===n||void 0===n||null===(e=n.offers)||void 0===e?void 0:e.slice(m,t))||[];p((e=>[...e,...l])),j(t),n&&n.offers&&t>=(null===n||void 0===n||null===(s=n.offers)||void 0===s?void 0:s.length)&&S(!0),A(!1)}),300))}),[m,N,C,n]),L=(0,l.useCallback)((e=>{if(!e||N||C)return;const{scrollTop:s,scrollHeight:t,clientHeight:l}=e;t-s-l<h.q2&&_()}),[N,C,_]);return(0,l.useEffect)((()=>{const e=E.current;if(e)return null===e||void 0===e||e.addEventListener("scroll",L),()=>null===e||void 0===e?void 0:e.removeEventListener("scroll",L)}),[L]),t&&n.isLoading?(0,g.jsx)("span",{className:"h-100 d-flex justify-content-center align-items-center",children:(0,g.jsx)(o.A,{animation:"grow",variant:"primary","data-testid":"cln-offers-list-spinner"})}):n.error?(0,g.jsx)(c.A,{className:"py-0 px-1 fs-7",variant:"danger","data-testid":"cln-offers-list-error",children:n.error}):null!==n&&void 0!==n&&n.offers&&null!==n&&void 0!==n&&n.offers.length&&(null===n||void 0===n?void 0:n.offers.length)>0?(0,g.jsxs)(f(),{containerRef:T,onScrollY:L,className:"cln-offers-list","data-testid":"cln-offers-list",options:{suppressScrollX:!0,wheelPropagation:!1},children:[u.map(((e,s)=>(0,g.jsx)(F,{i:s,expanded:d,setExpanded:x,initExpansions:i,offer:e},s))),N&&(0,g.jsx)(r.A,{xs:12,className:"d-flex align-items-center justify-content-center mb-5",children:(0,g.jsx)(o.A,{animation:"grow",variant:"primary"})}),C&&(null===n||void 0===n?void 0:n.offers.length)>100&&(0,g.jsx)("h6",{className:"d-flex align-self-center py-4 text-muted",children:"No more offers to load!"})]}):(0,g.jsx)(a.A,{className:"text-light fs-6 h-75 mt-5 align-items-center justify-content-center",children:(0,g.jsxs)(a.A,{className:"d-flex align-items-center justify-content-center mt-2",children:[s?(0,g.jsx)(w.p,{className:"no-clntx-dark pb-1"}):(0,g.jsx)(b.t,{className:"no-clntx-light pb-1"}),(0,g.jsx)(a.A,{className:"text-center",children:"No offer found. Click receive to generate new offer!"})]})})},E=S}}]);
//# sourceMappingURL=906.4ca8967c.chunk.js.map